"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9267],{7321:(e,s,r)=>{r.d(s,{D:()=>u});var a=r(5155),t=r(2115),l=r(5604),n=r(2498),i=r(9582),o=r(6485),d=r(9919),c=r(6503),m=r(4269);function u(e){let{onVerified:s,onSkip:r,required:u=!0,className:x}=e,h=(0,l.useTranslations)("AgeVerification"),[g,p]=(0,t.useState)(""),[b,N]=(0,t.useState)(""),[w,f]=(0,t.useState)(!1);Array.from({length:31},(e,s)=>({value:String(s+1),label:String(s+1)}));let j=new Date().getFullYear();Array.from({length:85},(e,s)=>{let r=j-16-s;return{value:String(r),label:String(r)}});let v=async()=>{if(!g)return void N(h("birthDateRequired"));f(!0),N("");try{if(!(e=>{let s=new Date(e),r=new Date,a=r.getFullYear()-s.getFullYear(),t=r.getMonth()-s.getMonth();return t<0||0===t&&r.getDate()<s.getDate()?a-1>=18:a>=18})(g)){N(h("underAge")),f(!1);return}s({birthDate:g,isValid:!0})}catch(e){N("An error occurred during age verification")}finally{f(!1)}};return(0,a.jsxs)("div",{className:(0,m.cn)("bg-white rounded-lg shadow-lg border border-gray-200 p-6 max-w-md mx-auto",x),children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-wine-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(n.A,{className:"w-8 h-8 text-wine-600"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:h("title")}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:h("description")})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(d.FO,{id:"birthDate",type:"date",label:h("birthDate"),value:g,onChange:e=>{p(e.target.value),N("")},error:b,required:u,max:new Date(j-16,11,31).toISOString().split("T")[0],min:new Date(j-100,0,1).toISOString().split("T")[0]}),b&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(i.A,{className:"h-5 w-5 text-red-400"}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-800",children:b})})]})}),(0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,a.jsxs)(c.$,{onClick:v,loading:w,fullWidth:!0,disabled:!g,children:[(0,a.jsx)(o.A,{className:"w-4 h-4 mr-2"}),h("verify")]}),!u&&r&&(0,a.jsx)(c.$,{onClick:r,variant:"ghost",fullWidth:!0,disabled:w,children:"Skip for now"})]})]}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Your information is processed according to our privacy policy. Age verification is required by law for alcohol purchases."})})]})}},9267:(e,s,r)=>{r.d(s,{RegisterPage:()=>y,s:()=>v});var a=r(5155),t=r(2115),l=r(2544),n=r(6942),i=r(5604),o=r(2619),d=r.n(o),c=r(63),m=r(7816),u=r(1078),x=r(508),h=r(1871),g=r(6583),p=r(9919),b=r(6503),N=r(7321),w=r(3691),f=r(2808),j=r(4269);function v(e){var s,r,o,v,y,C,D,S,A,k,F;let{locale:P,className:O,redirectTo:T,onSuccess:q,showHeader:Y=!0,onSwitchToLogin:R}=e,B=(0,i.useTranslations)("Auth"),I=(0,c.useRouter)(),V=(0,c.useSearchParams)(),{signUp:L}=(0,w.A)(),[_,z]=(0,t.useState)(null),M=()=>z(null),[W,$]=(0,t.useState)(!1),[E,J]=(0,t.useState)(!1),[K,U]=(0,t.useState)(!1),[G,H]=(0,t.useState)(!1),[Q,X]=(0,t.useState)(!1),Z=T||V.get("redirect")||"/".concat(P),{register:ee,handleSubmit:es,formState:{errors:er,isSubmitting:ea},watch:et,setValue:el,clearErrors:en}=(0,l.mN)({resolver:(0,n.u)(f.zK),defaultValues:{email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",birthDate:"",preferredLanguage:P,marketingConsent:!1,newsletterConsent:!1,isBusiness:!1,companyName:"",vatNumber:"",termsAccepted:!1,privacyAccepted:!1}}),ei=et("isBusiness"),eo=et("birthDate"),ed=async e=>{try{if(M(),en(),!G&&eo){let e=new Date(eo);if(new Date().getFullYear()-e.getFullYear()<18)return void U(!0)}let s=await L(e.email,e.password,{firstName:e.firstName,lastName:e.lastName,phone:e.phone,birthDate:e.birthDate,preferredLanguage:e.preferredLanguage,marketingConsent:e.marketingConsent||!1,newsletterConsent:e.newsletterConsent||!1,isBusiness:e.isBusiness||!1,companyName:e.companyName,vatNumber:e.vatNumber});if(s.error)return void z(s.error);X(!0),setTimeout(()=>{q?q():I.push(Z)},2e3)}catch(e){console.error("Registration error:",e)}},ec=()=>{_&&M()};return K?(0,a.jsx)("div",{className:(0,j.cn)("w-full max-w-md mx-auto",O),children:(0,a.jsx)(N.D,{onVerified:e=>{e.isValid&&(H(!0),el("birthDate",e.birthDate),U(!1))},onSkip:()=>U(!1),required:!1})}):Q?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(m.A,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:B("accountCreated")}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:B("emailVerificationSent")}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting you now..."})]}):(0,a.jsxs)("div",{className:(0,j.cn)("w-full max-w-md mx-auto",O),children:[Y&&(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:B("registerTitle")}),(0,a.jsx)("p",{className:"text-gray-600",children:B("registerSubtitle")})]}),(0,a.jsxs)("form",{onSubmit:es(ed),className:"space-y-6",children:[_&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-red-400"}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-800",children:_})})]})}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>el("isBusiness",!1),className:(0,j.cn)("p-3 rounded-lg border-2 flex flex-col items-center space-y-2 transition-colors",ei?"border-gray-200 hover:border-gray-300":"border-wine-500 bg-wine-50 text-wine-700"),children:[(0,a.jsx)(x.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Personal"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>el("isBusiness",!0),className:(0,j.cn)("p-3 rounded-lg border-2 flex flex-col items-center space-y-2 transition-colors",ei?"border-wine-500 bg-wine-50 text-wine-700":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)(h.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Business"})]})]})}),(0,a.jsx)(p.FO,{...ee("email"),id:"email",type:"email",label:B("email"),placeholder:"your@email.com",error:null==(s=er.email)?void 0:s.message,required:!0,autoComplete:"email",onChange:e=>{ee("email").onChange(e),ec()}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(p.FO,{...ee("firstName"),id:"firstName",type:"text",label:B("firstName"),placeholder:"John",error:null==(r=er.firstName)?void 0:r.message,required:!0,autoComplete:"given-name",onChange:e=>{ee("firstName").onChange(e),ec()}}),(0,a.jsx)(p.FO,{...ee("lastName"),id:"lastName",type:"text",label:B("lastName"),placeholder:"Doe",error:null==(o=er.lastName)?void 0:o.message,required:!0,autoComplete:"family-name",onChange:e=>{ee("lastName").onChange(e),ec()}})]}),ei&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.FO,{...ee("companyName"),id:"companyName",type:"text",label:B("companyName"),placeholder:"Your Company Name",error:null==(v=er.companyName)?void 0:v.message,required:ei,autoComplete:"organization"}),(0,a.jsx)(p.FO,{...ee("vatNumber"),id:"vatNumber",type:"text",label:B("vatNumber"),placeholder:"FR12345678901",error:null==(y=er.vatNumber)?void 0:y.message,hint:"Format: Country code + VAT number (e.g., FR12345678901)"})]}),(0,a.jsx)(p.FO,{...ee("phone"),id:"phone",type:"tel",label:B("phone"),placeholder:"+33 1 23 45 67 89",error:null==(C=er.phone)?void 0:C.message,autoComplete:"tel"}),(0,a.jsx)(p.FO,{...ee("birthDate"),id:"birthDate",type:"date",label:B("birthDate"),error:null==(D=er.birthDate)?void 0:D.message,required:!0,max:new Date(new Date().getFullYear()-16,11,31).toISOString().split("T")[0],min:new Date(new Date().getFullYear()-100,0,1).toISOString().split("T")[0]}),(0,a.jsx)(p.zM,{...ee("preferredLanguage"),label:B("preferredLanguage"),options:[{value:"en",label:B("english")},{value:"fr",label:B("french")}],error:null==(S=er.preferredLanguage)?void 0:S.message}),(0,a.jsx)(p.FO,{...ee("password"),id:"password",type:"password",label:B("password"),placeholder:"••••••••",error:null==(A=er.password)?void 0:A.message,required:!0,autoComplete:"new-password",showPasswordToggle:!0,showPassword:W,onPasswordToggle:()=>$(!W),hint:B("passwordRequirements")}),(0,a.jsx)(p.FO,{...ee("confirmPassword"),id:"confirmPassword",type:"password",label:B("confirmPassword"),placeholder:"••••••••",error:null==(k=er.confirmPassword)?void 0:k.message,required:!0,autoComplete:"new-password",showPasswordToggle:!0,showPassword:E,onPasswordToggle:()=>J(!E)}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(p.Yh,{id:"termsAccepted",checked:et("termsAccepted"),onChange:e=>el("termsAccepted",e),error:null==(F=er.termsAccepted)?void 0:F.message,children:(0,a.jsxs)("span",{className:"text-sm",children:[B("termsAndPrivacy")," ",(0,a.jsx)(d(),{href:"/".concat(P,"/legal/terms"),className:"text-wine-600 hover:text-wine-500",target:"_blank",children:"Terms of Service"})," and ",(0,a.jsx)(d(),{href:"/".concat(P,"/legal/privacy"),className:"text-wine-600 hover:text-wine-500",target:"_blank",children:"Privacy Policy"})]})}),(0,a.jsx)(p.Yh,{id:"marketingConsent",checked:et("marketingConsent"),onChange:e=>el("marketingConsent",e),children:(0,a.jsx)("span",{className:"text-sm",children:B("marketingConsent")})})]}),(0,a.jsxs)(b.$,{type:"submit",fullWidth:!0,loading:ea,disabled:ea,children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-2"}),B("createAccount")]}),(0,a.jsx)("div",{className:"text-center pt-4 border-t border-gray-200",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[B("hasAccount")," ",R?(0,a.jsx)("button",{type:"button",onClick:R,className:"font-medium text-wine-600 hover:text-wine-500",children:B("signIn")}):(0,a.jsx)(d(),{href:"/".concat(P,"/login").concat(V.get("redirect")?"?redirect=".concat(encodeURIComponent(V.get("redirect"))):""),className:"font-medium text-wine-600 hover:text-wine-500",children:B("signIn")})]})})]})]})}function y(e){let{params:{locale:s}}=e;return(0,a.jsx)("div",{className:"min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 bg-gray-50",children:(0,a.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,a.jsx)("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:(0,a.jsx)(v,{locale:s})})})})}}}]);