(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7070],{1524:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},1847:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:x,...u}=e;return(0,a.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:s,strokeWidth:c?24*Number(n)/Number(r):n,className:l("lucide",o),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{className:c,...o}=s;return(0,a.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...o})});return s.displayName=r(e),s}},2056:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3341:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},6132:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6617:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},6648:(e,t,s)=>{"use strict";s.d(t,{UU:()=>l});var a=s(8760);let r=()=>(0,a.createBrowserSupabaseClient)(),l=r;r()},6651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6921:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},7415:(e,t,s)=>{Promise.resolve().then(s.bind(s,7626))},7626:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var a=s(5155),r=s(2115),l=s(6648),i=s(1847);let n=(0,i.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),c=(0,i.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var o=s(6132),d=s(7828);let x=(0,i.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),u=(0,i.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),m={name:"",description:"",price_euros:0,stock_quantity:0,vintage:new Date().getFullYear(),region:"",grape_varieties:[],alcohol_content:12,volume_ml:750,producer:"",appellation:"",wine_type:"red",serving_temperature:"",aging_potential:"",tasting_notes:"",food_pairings:[],certifications:[],slug:"",meta_description:"",image_url:"",gallery_images:[],is_active:!0},p=[{value:"red",label:"Rouge"},{value:"white",label:"Blanc"},{value:"ros\xe9",label:"Ros\xe9"},{value:"sparkling",label:"Effervescent"},{value:"dessert",label:"Dessert"},{value:"fortified",label:"Fortifi\xe9"}],g=["Merlot","Cabernet Sauvignon","Pinot Noir","Syrah","Grenache","Chardonnay","Sauvignon Blanc","Riesling","Pinot Grigio","Gew\xfcrztraminer"],h=["AOC","AOP","IGP","Bio","Biodynamique","HVE","Terra Vitis"];function y(e){let{product:t,onSave:s,onCancel:i,isLoading:y=!1,mode:v}=e,[f,j]=(0,r.useState)({...m,...t}),[b,w]=(0,r.useState)({}),[N,_]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),A=(0,l.UU)();(0,r.useEffect)(()=>{f.name&&!f.slug&&q(f.name)},[f.name]);let q=e=>{let t=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");j(e=>({...e,slug:t}))},S=async e=>{if(e.preventDefault(),(()=>{let e={};return f.name.trim()||(e.name="Le nom est requis"),f.description.trim()||(e.description="La description est requise"),f.price_euros<=0&&(e.price_euros="Le prix doit \xeatre sup\xe9rieur \xe0 0"),f.stock_quantity<0&&(e.stock_quantity="Le stock ne peut pas \xeatre n\xe9gatif"),(f.vintage<1800||f.vintage>new Date().getFullYear()+5)&&(e.vintage="Mill\xe9sime invalide"),f.region.trim()||(e.region="La r\xe9gion est requise"),0===f.grape_varieties.length&&(e.grape_varieties="Au moins un c\xe9page est requis"),(f.alcohol_content<0||f.alcohol_content>20)&&(e.alcohol_content="Degr\xe9 d'alcool invalide (0-20%)"),f.volume_ml<=0&&(e.volume_ml="Le volume doit \xeatre sup\xe9rieur \xe0 0"),f.producer.trim()||(e.producer="Le producteur est requis"),f.slug.trim()||(e.slug="Le slug est requis"),f.image_url.trim()||(e.image_url="Une image principale est requise"),w(e),0===Object.keys(e).length})())try{await s(f)}catch(e){console.error("Failed to save product:",e)}},M=async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],_(!0);try{let t=e.name.split(".").pop(),s="".concat(Date.now(),".").concat(t),a="products/".concat(s),{data:r,error:l}=await A.storage.from("product-images").upload(a,e);if(l)throw l;let{data:{publicUrl:i}}=A.storage.from("product-images").getPublicUrl(a);return i}finally{_(!1)}},D=async e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s)try{let e=await M(s);j(t=>({...t,image_url:e}))}catch(e){console.error("Failed to upload image:",e)}},F=async e=>{let t=Array.from(e.target.files||[]);if(0!==t.length)try{let e=await Promise.all(t.map(e=>M(e,!0)));j(t=>({...t,gallery_images:[...t.gallery_images,...e]}))}catch(e){console.error("Failed to upload gallery images:",e)}},E=(e,t)=>{t.trim()&&!f[e].includes(t.trim())&&j(s=>({...s,[e]:[...s[e],t.trim()]}))},R=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],[l,i]=(0,r.useState)("");return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),E(e,l),i(""))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ajouter ".concat(t.toLowerCase())}),(0,a.jsx)("button",{type:"button",onClick:()=>{E(e,l),i("")},className:"px-3 py-2 bg-wine-600 text-white rounded-lg hover:bg-wine-700",children:(0,a.jsx)(n,{className:"w-4 h-4"})})]}),s.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:s.map(t=>(0,a.jsx)("button",{type:"button",onClick:()=>E(e,t),className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",disabled:f[e].includes(t),children:t},t))}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:f[e].map((t,s)=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-wine-100 text-wine-800 rounded text-sm",children:[t,(0,a.jsx)("button",{type:"button",onClick:()=>{j(t=>({...t,[e]:t[e].filter((e,t)=>t!==s)}))},className:"hover:text-wine-600",children:(0,a.jsx)(c,{className:"w-3 h-3"})})]},s))}),b[e]&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b[e]]})]})};if(k){var L;return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Aper\xe7u du produit"}),(0,a.jsx)("button",{onClick:()=>C(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:(0,a.jsx)(c,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{children:[f.image_url&&(0,a.jsx)("img",{src:f.image_url,alt:f.name,className:"w-full h-96 object-cover rounded-lg"}),f.gallery_images.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-4",children:f.gallery_images.map((e,t)=>(0,a.jsx)("img",{src:e,alt:"Gallery ".concat(t+1),className:"w-full h-20 object-cover rounded"},t))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[f.name," ",f.vintage]}),(0,a.jsxs)("p",{className:"text-xl font-semibold text-wine-600",children:[f.price_euros.toFixed(2)," â‚¬"]}),(0,a.jsx)("p",{className:"text-gray-700",children:f.description}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Producteur:"})," ",f.producer]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"R\xe9gion:"})," ",f.region]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Appellation:"})," ",f.appellation]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Type:"})," ",null==(L=p.find(e=>e.value===f.wine_type))?void 0:L.label]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Degr\xe9 d'alcool:"})," ",f.alcohol_content,"%"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Volume:"})," ",f.volume_ml,"ml"]})]}),f.grape_varieties.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"C\xe9pages:"})," ",f.grape_varieties.join(", ")]}),f.tasting_notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Notes de d\xe9gustation:"}),(0,a.jsx)("p",{className:"mt-1",children:f.tasting_notes})]}),f.food_pairings.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Accords mets-vins:"})," ",f.food_pairings.join(", ")]})]})]})]})}return(0,a.jsxs)("form",{onSubmit:S,className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"create"===v?"Nouveau produit":"Modifier le produit"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>C(!0),className:"px-4 py-2 text-wine-600 border border-wine-600 rounded-lg hover:bg-wine-50 flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),"Aper\xe7u"]}),(0,a.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,a.jsxs)("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-wine-600 text-white rounded-lg hover:bg-wine-700 disabled:opacity-50 flex items-center gap-2",children:[(0,a.jsx)(x,{className:"w-4 h-4"}),y?"Enregistrement...":"Enregistrer"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Informations de base"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom *"}),(0,a.jsx)("input",{type:"text",value:f.name,onChange:e=>j(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ex: Ch\xe2teauneuf-du-Pape"}),b.name&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.name]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,a.jsx)("textarea",{value:f.description,onChange:e=>j(t=>({...t,description:e.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Description d\xe9taill\xe9e du vin..."}),b.description&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.description]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (â‚¬) *"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:f.price_euros,onChange:e=>j(t=>({...t,price_euros:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500"}),b.price_euros&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.price_euros]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock *"}),(0,a.jsx)("input",{type:"number",value:f.stock_quantity,onChange:e=>j(t=>({...t,stock_quantity:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500"}),b.stock_quantity&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.stock_quantity]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mill\xe9sime *"}),(0,a.jsx)("input",{type:"number",value:f.vintage,onChange:e=>j(t=>({...t,vintage:parseInt(e.target.value)||new Date().getFullYear()})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500"}),b.vintage&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.vintage]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de vin *"}),(0,a.jsx)("select",{value:f.wine_type,onChange:e=>j(t=>({...t,wine_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",children:p.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"D\xe9tails du vin"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Producteur *"}),(0,a.jsx)("input",{type:"text",value:f.producer,onChange:e=>j(t=>({...t,producer:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ex: Domaine Vallot"}),b.producer&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.producer]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"R\xe9gion *"}),(0,a.jsx)("input",{type:"text",value:f.region,onChange:e=>j(t=>({...t,region:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ex: Vall\xe9e du Rh\xf4ne"}),b.region&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.region]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appellation"}),(0,a.jsx)("input",{type:"text",value:f.appellation,onChange:e=>j(t=>({...t,appellation:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ex: AOC Ch\xe2teauneuf-du-Pape"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Degr\xe9 d'alcool (%) *"}),(0,a.jsx)("input",{type:"number",step:"0.1",value:f.alcohol_content,onChange:e=>j(t=>({...t,alcohol_content:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500"}),b.alcohol_content&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.alcohol_content]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Volume (ml) *"}),(0,a.jsx)("input",{type:"number",value:f.volume_ml,onChange:e=>j(t=>({...t,volume_ml:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500"}),b.volume_ml&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.volume_ml]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temp\xe9rature de service"}),(0,a.jsx)("input",{type:"text",value:f.serving_temperature,onChange:e=>j(t=>({...t,serving_temperature:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ex: 16-18\xb0C"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Potentiel de garde"}),(0,a.jsx)("input",{type:"text",value:f.aging_potential,onChange:e=>j(t=>({...t,aging_potential:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ex: 10-15 ans"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[R("grape_varieties","C\xe9pages *",g),R("food_pairings","Accords mets-vins"),R("certifications","Certifications",h)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes de d\xe9gustation"}),(0,a.jsx)("textarea",{value:f.tasting_notes,onChange:e=>j(t=>({...t,tasting_notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"D\xe9crivez les ar\xf4mes, saveurs, et caract\xe9ristiques du vin..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug URL *"}),(0,a.jsx)("input",{type:"text",value:f.slug,onChange:e=>j(t=>({...t,slug:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ex: chateauneuf-du-pape-2020"}),b.slug&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.slug]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta description"}),(0,a.jsx)("input",{type:"text",value:f.meta_description,onChange:e=>j(t=>({...t,meta_description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Description pour les moteurs de recherche..."})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GTIN (Code-barres)"}),(0,a.jsx)("input",{type:"text",value:f.gtin||"",onChange:e=>j(t=>({...t,gtin:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ex: 1234567890123"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MPN (R\xe9f\xe9rence fabricant)"}),(0,a.jsx)("input",{type:"text",value:f.mpn||"",onChange:e=>j(t=>({...t,mpn:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ex: DV-CDP-2020"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Images"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image principale *"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[f.image_url&&(0,a.jsx)("img",{src:f.image_url,alt:"Image principale",className:"w-20 h-20 object-cover rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:D,className:"hidden",id:"main-image-upload"}),(0,a.jsxs)("label",{htmlFor:"main-image-upload",className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 cursor-pointer",children:[(0,a.jsx)(u,{className:"w-4 h-4"}),f.image_url?"Changer l'image":"Uploader une image"]}),N&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Upload en cours..."})]})]}),b.image_url&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),b.image_url]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Galerie d'images"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:F,className:"hidden",id:"gallery-images-upload"}),(0,a.jsxs)("label",{htmlFor:"gallery-images-upload",className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 cursor-pointer",children:[(0,a.jsx)(u,{className:"w-4 h-4"}),"Ajouter des images"]})]}),f.gallery_images.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-4",children:f.gallery_images.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e,alt:"Gallery ".concat(t+1),className:"w-full h-20 object-cover rounded"}),(0,a.jsx)("button",{type:"button",onClick:()=>{j(e=>({...e,gallery_images:e.gallery_images.filter((e,s)=>s!==t)}))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(c,{className:"w-3 h-3"})})]},t))})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:e=>j(t=>({...t,is_active:e.target.checked})),className:"w-4 h-4 text-wine-600 bg-gray-100 border-gray-300 rounded focus:ring-wine-500"}),(0,a.jsx)("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Produit actif (visible sur le site)"})]})]})}var v=s(9559),f=s(6617);let j=(0,i.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var b=s(2056),w=s(6921),N=s(1524),_=s(6651),k=s(9867);let C=(0,i.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),A=[{value:"in",label:"Entr\xe9e de stock",color:"text-green-600"},{value:"out",label:"Sortie de stock",color:"text-red-600"},{value:"adjustment",label:"Ajustement",color:"text-blue-600"},{value:"reserved",label:"R\xe9servation",color:"text-orange-600"},{value:"unreserved",label:"Annulation r\xe9servation",color:"text-orange-400"}],q=[{value:"all",label:"Tous les produits"},{value:"low_stock",label:"Stock faible"},{value:"out_of_stock",label:"Rupture de stock"},{value:"reserved",label:"Avec r\xe9servations"},{value:"high_value",label:"Valeur \xe9lev\xe9e"}];function S(e){let{onProductEdit:t,onProductView:s}=e,[i,n]=(0,r.useState)([]),[c,o]=(0,r.useState)([]),[x,u]=(0,r.useState)(null),[m,p]=(0,r.useState)(!0),[g,h]=(0,r.useState)(""),[y,S]=(0,r.useState)("all"),[M,D]=(0,r.useState)(!1),[F,E]=(0,r.useState)(!1),[R,L]=(0,r.useState)(null),[P,V]=(0,r.useState)({quantity:0,type:"adjustment",reason:"",notes:""}),I=(0,l.UU)();(0,r.useEffect)(()=>{U()},[]);let U=async()=>{p(!0);try{await Promise.all([O(),T(),z()])}catch(e){console.error("Failed to load inventory data:",e)}finally{p(!1)}},O=async()=>{let{data:e,error:t}=await I.from("wine_products").select("\n        id,\n        name,\n        vintage,\n        producer,\n        wine_type,\n        stock_quantity,\n        reserved_quantity,\n        price_euros,\n        updated_at,\n        low_stock_threshold,\n        reorder_point,\n        cost_price,\n        image_url\n      ").eq("is_active",!0).order("name");if(t)return void console.error("Failed to load inventory:",t);n(e.map(e=>({...e,available_quantity:e.stock_quantity-(e.reserved_quantity||0),last_updated:e.updated_at,profit_margin:e.cost_price?(e.price_euros-e.cost_price)/e.cost_price*100:void 0})))},T=async()=>{let{data:e,error:t}=await I.from("wine_products").select("stock_quantity, reserved_quantity, price_euros, cost_price, low_stock_threshold").eq("is_active",!0);if(t)return void console.error("Failed to load stats:",t);u({total_products:e.length,total_stock_value:e.reduce((e,t)=>e+t.stock_quantity*(t.cost_price||t.price_euros),0),low_stock_items:e.filter(e=>e.stock_quantity<=(e.low_stock_threshold||5)).length,out_of_stock_items:e.filter(e=>0===e.stock_quantity).length,reserved_items:e.filter(e=>(e.reserved_quantity||0)>0).length,recent_movements:0})},z=async()=>{let{data:e,error:t}=await I.from("stock_movements").select("\n        id,\n        product_id,\n        movement_type,\n        quantity,\n        reason,\n        reference,\n        created_at,\n        created_by,\n        notes,\n        wine_products!inner(name, vintage)\n      ").order("created_at",{ascending:!1}).limit(50);if(t)return void console.error("Failed to load movements:",t);if(o(e||[]),x){let t=(null==e?void 0:e.filter(e=>new Date(e.created_at)>new Date(Date.now()-864e5)).length)||0;u(e=>e?{...e,recent_movements:t}:null)}},G=async()=>{if(R&&0!==P.quantity)try{let e=R.stock_quantity+P.quantity,{error:t}=await I.from("wine_products").update({stock_quantity:e,updated_at:new Date().toISOString()}).eq("id",R.id);if(t)throw t;let{error:s}=await I.from("stock_movements").insert({product_id:R.id,movement_type:P.type,quantity:P.quantity,reason:P.reason,notes:P.notes,created_by:"current-user-id"});if(s)throw s;await U(),E(!1),L(null),V({quantity:0,type:"adjustment",reason:"",notes:""})}catch(e){console.error("Failed to adjust stock:",e)}},B=i.filter(e=>{let t=e.name.toLowerCase().includes(g.toLowerCase())||e.producer.toLowerCase().includes(g.toLowerCase())||e.vintage.toString().includes(g),s=(()=>{switch(y){case"low_stock":return e.stock_quantity<=(e.low_stock_threshold||5);case"out_of_stock":return 0===e.stock_quantity;case"reserved":return(e.reserved_quantity||0)>0;case"high_value":return e.stock_quantity*e.price_euros>1e3;default:return!0}})();return t&&s});return m?(0,a.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,a.jsx)(v.A,{className:"w-8 h-8 animate-spin text-wine-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Chargement de l'inventaire..."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[x&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow border",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"w-8 h-8 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Produits"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.total_products})]})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow border",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j,{className:"w-8 h-8 text-green-600"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Valeur stock"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.total_stock_value.toLocaleString("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0})})]})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow border",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b.A,{className:"w-8 h-8 text-orange-600"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Stock faible"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.low_stock_items})]})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow border",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w.A,{className:"w-8 h-8 text-red-600"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Ruptures"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.out_of_stock_items})]})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow border",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"w-8 h-8 text-purple-600"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"R\xe9serv\xe9s"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.reserved_items})]})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow border",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(N.A,{className:"w-8 h-8 text-indigo-600"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Mvt. 24h"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.recent_movements})]})]})})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow border",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(_.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Rechercher un produit...",value:g,onChange:e=>h(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500 w-64"})]}),(0,a.jsx)("select",{value:y,onChange:e=>S(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",children:q.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>D(!M),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[(0,a.jsx)(j,{className:"w-4 h-4"}),"Mouvements"]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Produit,Mill\xe9sime,Producteur,Type,Stock,R\xe9serv\xe9,Disponible,Prix,Valeur Stock",...B.map(e=>['"'.concat(e.name,'"'),e.vintage,'"'.concat(e.producer,'"'),'"'.concat(e.wine_type,'"'),e.stock_quantity,e.reserved_quantity||0,e.available_quantity,e.price_euros.toFixed(2),(e.stock_quantity*e.price_euros).toFixed(2)].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),s=URL.createObjectURL(e);t.setAttribute("href",s),t.setAttribute("download","inventaire-".concat(new Date().toISOString().split("T")[0],".csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"w-4 h-4"}),"Exporter"]}),(0,a.jsxs)("button",{onClick:U,className:"px-4 py-2 bg-wine-600 text-white rounded-lg hover:bg-wine-700 flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"w-4 h-4"}),"Actualiser"]})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow border overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produit"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xe9serv\xe9"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Disponible"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valeur"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(e=>{let r=0===e.stock_quantity?{label:"Rupture",color:"bg-red-100 text-red-800"}:e.stock_quantity<=(e.low_stock_threshold||5)?{label:"Stock faible",color:"bg-orange-100 text-orange-800"}:{label:"En stock",color:"bg-green-100 text-green-800"};return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.image_url&&(0,a.jsx)("img",{src:e.image_url,alt:e.name,className:"w-10 h-10 rounded object-cover mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.name," ",e.vintage]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.producer," â€¢ ",e.wine_type]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.stock_quantity}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reserved_quantity||0}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.available_quantity}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.price_euros.toFixed(2)," â‚¬"]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[(e.stock_quantity*e.price_euros).toFixed(2)," â‚¬"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(r.color),children:r.label})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{L(e),E(!0)},className:"text-wine-600 hover:text-wine-900",title:"Ajuster le stock",children:(0,a.jsx)(C,{className:"w-4 h-4"})}),s&&(0,a.jsx)("button",{onClick:()=>s(e.id),className:"text-gray-600 hover:text-gray-900",title:"Voir le produit",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})}),t&&(0,a.jsx)("button",{onClick:()=>t(e.id),className:"text-blue-600 hover:text-blue-900",title:"Modifier le produit",children:(0,a.jsx)(C,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),0===B.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(f.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun produit trouv\xe9"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Aucun produit ne correspond \xe0 vos crit\xe8res de recherche."})]})]}),F&&R&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Ajuster le stock - ",R.name," ",R.vintage]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Stock actuel: ",R.stock_quantity]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type d'ajustement"}),(0,a.jsxs)("select",{value:P.type,onChange:e=>V(t=>({...t,type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",children:[(0,a.jsx)("option",{value:"in",children:"Entr\xe9e de stock"}),(0,a.jsx)("option",{value:"out",children:"Sortie de stock"}),(0,a.jsx)("option",{value:"adjustment",children:"Ajustement"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Quantit\xe9 ","out"===P.type?"(n\xe9gative)":"(positive)"]}),(0,a.jsx)("input",{type:"number",value:P.quantity,onChange:e=>{let t=parseInt(e.target.value)||0,s="out"===P.type?-Math.abs(t):Math.abs(t);V(e=>({...e,quantity:s}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Nouveau stock: ",R.stock_quantity+P.quantity]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Raison *"}),(0,a.jsx)("input",{type:"text",value:P.reason,onChange:e=>V(t=>({...t,reason:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",placeholder:"Ex: R\xe9ception marchandise, Vente, Casse..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,a.jsx)("textarea",{value:P.notes,onChange:e=>V(t=>({...t,notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",rows:2,placeholder:"Notes additionnelles..."})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>{E(!1),L(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,a.jsx)("button",{onClick:G,disabled:!P.reason||0===P.quantity,className:"px-4 py-2 bg-wine-600 text-white rounded-lg hover:bg-wine-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirmer"})]})]})}),M&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow border",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Mouvements de stock r\xe9cents"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produit"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantit\xe9"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Raison"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.slice(0,20).map(e=>{var t,s;let r=A.find(t=>t.value===e.movement_type);return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.created_at).toLocaleDateString("fr-FR")}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[null==(t=e.wine_products)?void 0:t.name," ",null==(s=e.wine_products)?void 0:s.vintage]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"text-sm font-medium ".concat((null==r?void 0:r.color)||"text-gray-600"),children:(null==r?void 0:r.label)||e.movement_type})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.quantity>0?"+":"",e.quantity]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reason})]},e.id)})})]})})]})]})}var M=s(3341);let D=(0,i.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),F=(0,i.A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),E=(0,i.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),R=[{value:"all",label:"Tous les types"},{value:"red",label:"Rouge"},{value:"white",label:"Blanc"},{value:"ros\xe9",label:"Ros\xe9"},{value:"sparkling",label:"Effervescent"},{value:"dessert",label:"Dessert"},{value:"fortified",label:"Fortifi\xe9"}],L=[{value:"all",label:"Tous les statuts"},{value:"active",label:"Actifs"},{value:"inactive",label:"Inactifs"},{value:"low_stock",label:"Stock faible"},{value:"out_of_stock",label:"Rupture de stock"}];function P(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(""),[d,x]=(0,r.useState)("all"),[u,m]=(0,r.useState)("all"),[p,g]=(0,r.useState)("name"),[h,j]=(0,r.useState)("asc"),[b,w]=(0,r.useState)("table"),[N,A]=(0,r.useState)(!1),[q,P]=(0,r.useState)(null),[V,I]=(0,r.useState)([]),[U,O]=(0,r.useState)(!1),T=(0,l.UU)();(0,r.useEffect)(()=>{z()},[]);let z=async()=>{i(!0);try{let{data:e,error:s}=await T.from("wine_products").select("\n          id,\n          name,\n          vintage,\n          producer,\n          wine_type,\n          price_euros,\n          stock_quantity,\n          is_active,\n          image_url,\n          slug,\n          created_at,\n          updated_at\n        ").order(p,{ascending:"asc"===h});if(s)throw s;t(e||[])}catch(e){console.error("Failed to load products:",e)}finally{i(!1)}},G=e=>{p===e?j(e=>"asc"===e?"desc":"asc"):(g(e),j("asc"))},B=t=>{let s=e.find(e=>e.id===t);s&&(P(s),A(!0))},H=t=>{let s=e.find(e=>e.id===t);s&&window.open("/products/".concat(s.slug),"_blank")},W=async e=>{try{if(q){let{error:t}=await T.from("wine_products").update({...e,updated_at:new Date().toISOString()}).eq("id",q.id);if(t)throw t}else{let{error:t}=await T.from("wine_products").insert({...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(t)throw t}A(!1),P(null),await z()}catch(e){throw console.error("Failed to save product:",e),e}},Y=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce produit ?"))try{let{error:t}=await T.from("wine_products").delete().eq("id",e);if(t)throw t;await z()}catch(e){console.error("Failed to delete product:",e)}},$=async t=>{let s=e.find(e=>e.id===t);if(s)try{let{error:e}=await T.from("wine_products").update({is_active:!s.is_active,updated_at:new Date().toISOString()}).eq("id",t);if(e)throw e;await z()}catch(e){console.error("Failed to toggle product status:",e)}},Q=async e=>{if(0!==V.length&&confirm("\xcates-vous s\xfbr de vouloir ".concat("delete"===e?"supprimer":"activate"===e?"activer":"d\xe9sactiver"," ").concat(V.length," produit(s) ?")))try{if("delete"===e){let{error:e}=await T.from("wine_products").delete().in("id",V);if(e)throw e}else{let{error:t}=await T.from("wine_products").update({is_active:"activate"===e,updated_at:new Date().toISOString()}).in("id",V);if(t)throw t}I([]),O(!1),await z()}catch(e){console.error("Failed to perform bulk action:",e)}},Z=e.filter(e=>{let t=e.name.toLowerCase().includes(c.toLowerCase())||e.producer.toLowerCase().includes(c.toLowerCase())||e.vintage.toString().includes(c),s="all"===d||e.wine_type===d,a=(()=>{switch(u){case"active":return e.is_active;case"inactive":return!e.is_active;case"low_stock":return e.stock_quantity<=5&&e.stock_quantity>0;case"out_of_stock":return 0===e.stock_quantity;default:return!0}})();return t&&s&&a}),K=[...Z].sort((e,t)=>{let s=e[p],a=t[p];return"string"==typeof s&&"string"==typeof a?"asc"===h?s.localeCompare(a):a.localeCompare(s):"number"==typeof s&&"number"==typeof a?"asc"===h?s-a:a-s:0}),J=e=>0===e?{label:"Rupture",color:"bg-red-100 text-red-800"}:e<=5?{label:"Stock faible",color:"bg-orange-100 text-orange-800"}:{label:"En stock",color:"bg-green-100 text-green-800"};return N?(0,a.jsx)("div",{className:"max-w-6xl mx-auto p-6",children:(0,a.jsx)(y,{product:q||void 0,onSave:W,onCancel:()=>{A(!1),P(null)},mode:q?"edit":"create"})}):"inventory"===b?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion de l'inventaire"}),(0,a.jsx)("p",{className:"text-gray-600",children:"G\xe9rez le stock et les mouvements de vos produits"})]}),(0,a.jsx)("button",{onClick:()=>w("table"),className:"px-4 py-2 bg-wine-600 text-white rounded-lg hover:bg-wine-700",children:"Retour aux produits"})]}),(0,a.jsx)(S,{onProductEdit:B,onProductView:H})]}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des produits"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[e.length," produit",e.length>1?"s":""," au total",Z.length!==e.length&&" â€¢ ".concat(Z.length," affich\xe9").concat(Z.length>1?"s":"")]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>w("inventory"),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),"Inventaire"]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["ID,Nom,Mill\xe9sime,Producteur,Type,Prix,Stock,Statut,Cr\xe9\xe9 le",...Z.map(e=>[e.id,'"'.concat(e.name,'"'),e.vintage,'"'.concat(e.producer,'"'),'"'.concat(e.wine_type,'"'),e.price_euros.toFixed(2),e.stock_quantity,e.is_active?"Actif":"Inactif",new Date(e.created_at).toLocaleDateString("fr-FR")].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),s=URL.createObjectURL(e);t.setAttribute("href",s),t.setAttribute("download","produits-".concat(new Date().toISOString().split("T")[0],".csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"w-4 h-4"}),"Exporter"]}),(0,a.jsxs)("button",{onClick:()=>{P(null),A(!0)},className:"px-4 py-2 bg-wine-600 text-white rounded-lg hover:bg-wine-700 flex items-center gap-2",children:[(0,a.jsx)(n,{className:"w-4 h-4"}),"Nouveau produit"]})]})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow border mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(_.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Rechercher un produit...",value:c,onChange:e=>o(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500 w-64"})]}),(0,a.jsx)("select",{value:d,onChange:e=>x(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",children:R.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("select",{value:u,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wine-500",children:L.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[V.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[V.length," s\xe9lectionn\xe9",V.length>1?"s":""]}),(0,a.jsx)("button",{onClick:()=>O(!U),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Actions"}),U&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border z-10",children:[(0,a.jsx)("button",{onClick:()=>Q("activate"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Activer"}),(0,a.jsx)("button",{onClick:()=>Q("deactivate"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"D\xe9sactiver"}),(0,a.jsx)("button",{onClick:()=>Q("delete"),className:"block w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-50",children:"Supprimer"})]})]}),(0,a.jsxs)("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>w("table"),className:"px-3 py-2 text-sm ".concat("table"===b?"bg-wine-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Tableau"}),(0,a.jsx)("button",{onClick:()=>w("cards"),className:"px-3 py-2 text-sm ".concat("cards"===b?"bg-wine-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Cartes"})]}),(0,a.jsx)("button",{onClick:z,className:"p-2 text-gray-600 hover:text-gray-800",title:"Actualiser",children:(0,a.jsx)(v.A,{className:"w-4 h-4"})})]})]})}),s&&(0,a.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,a.jsx)(v.A,{className:"w-8 h-8 animate-spin text-wine-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Chargement des produits..."})]}),!s&&"table"===b&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow border overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left",children:(0,a.jsx)("input",{type:"checkbox",checked:V.length===K.length&&K.length>0,onChange:e=>{e.target.checked?I(K.map(e=>e.id)):I([])},className:"w-4 h-4 text-wine-600 bg-gray-100 border-gray-300 rounded focus:ring-wine-500"})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("button",{onClick:()=>G("name"),className:"flex items-center gap-1 hover:text-gray-700",children:["Produit",(0,a.jsx)(M.A,{className:"w-3 h-3"})]})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("button",{onClick:()=>G("vintage"),className:"flex items-center gap-1 hover:text-gray-700",children:["Mill\xe9sime",(0,a.jsx)(M.A,{className:"w-3 h-3"})]})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("button",{onClick:()=>G("price_euros"),className:"flex items-center gap-1 hover:text-gray-700",children:["Prix",(0,a.jsx)(M.A,{className:"w-3 h-3"})]})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("button",{onClick:()=>G("stock_quantity"),className:"flex items-center gap-1 hover:text-gray-700",children:["Stock",(0,a.jsx)(M.A,{className:"w-3 h-3"})]})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map(e=>{let t=J(e.stock_quantity);return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:V.includes(e.id),onChange:t=>{t.target.checked?I(t=>[...t,e.id]):I(t=>t.filter(t=>t!==e.id))},className:"w-4 h-4 text-wine-600 bg-gray-100 border-gray-300 rounded focus:ring-wine-500"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.image_url&&(0,a.jsx)("img",{src:e.image_url,alt:e.name,className:"w-10 h-10 rounded object-cover mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.producer})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.vintage}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.wine_type}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.price_euros.toFixed(2)," â‚¬"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(t.color),children:[e.stock_quantity," â€¢ ",t.label]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Actif":"Inactif"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>H(e.id),className:"text-gray-600 hover:text-gray-900",title:"Voir sur le site",children:(0,a.jsx)(D,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>B(e.id),className:"text-blue-600 hover:text-blue-900",title:"Modifier",children:(0,a.jsx)(C,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>$(e.id),className:"text-orange-600 hover:text-orange-900",title:e.is_active?"D\xe9sactiver":"Activer",children:(0,a.jsx)(F,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>Y(e.id),className:"text-red-600 hover:text-red-900",title:"Supprimer",children:(0,a.jsx)(E,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),0===K.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(f.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun produit trouv\xe9"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Aucun produit ne correspond \xe0 vos crit\xe8res de recherche."})]})]}),!s&&"cards"===b&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:K.map(e=>{let t=J(e.stock_quantity);return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow border overflow-hidden",children:[e.image_url&&(0,a.jsx)("img",{src:e.image_url,alt:e.name,className:"w-full h-48 object-cover"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 truncate",children:[e.name," ",e.vintage]}),(0,a.jsx)("input",{type:"checkbox",checked:V.includes(e.id),onChange:t=>{t.target.checked?I(t=>[...t,e.id]):I(t=>t.filter(t=>t!==e.id))},className:"w-4 h-4 text-wine-600 bg-gray-100 border-gray-300 rounded focus:ring-wine-500"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.producer}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-wine-600 mb-2",children:[e.price_euros.toFixed(2)," â‚¬"]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(t.color),children:t.label}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Actif":"Inactif"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Stock: ",e.stock_quantity]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>H(e.id),className:"p-1 text-gray-600 hover:text-gray-900",title:"Voir sur le site",children:(0,a.jsx)(D,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>B(e.id),className:"p-1 text-blue-600 hover:text-blue-900",title:"Modifier",children:(0,a.jsx)(C,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>$(e.id),className:"p-1 text-orange-600 hover:text-orange-900",title:e.is_active?"D\xe9sactiver":"Activer",children:(0,a.jsx)(F,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>Y(e.id),className:"p-1 text-red-600 hover:text-red-900",title:"Supprimer",children:(0,a.jsx)(E,{className:"w-4 h-4"})})]})]})]})]},e.id)})})]})}},7828:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9559:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9867:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{e.O(0,[8760,8441,1255,7358],()=>e(e.s=7415)),_N_E=e.O()}]);